<script>
    XmlParser = function(superClass) {
      return class extends superClass {

        getByAttributeValue(collection, attribute, value) {
          for (let item of collection) {
            if(item.getAttribute(attribute) === value){
              return item;
            }
          }
        }

        getTime(item) {
          return this.value(item.children[0]) 
        }


        getTimeAndValuePairs(sourceXml, attributeName, name) {
          const measurementTVPs = this.getByAttributeValue(sourceXml, 'gml:id', attributeName)
            .getElementsByTagName('wml2:MeasurementTVP')

          return measurementTVPs;
        }

        getValue(item) {
          return parseFloat(this.value(item.children[1])); 
        }

        parseLocationName(response){
          const locations = response.getElementsByTagName('gml:name');
          const locationRow = this.getByAttributeValue(locations, 'codeSpace', 'http://xml.fmi.fi/namespace/locationcode/name');

          const location = this.value(locationRow);

          return location;
        }

        raiseEvent(name, payload) {
          const event = new CustomEvent(name, {detail: payload, bubbles: true, composed: true});
          this.dispatchEvent(event);
        }


        value(xmlElement) {
          return xmlElement.childNodes[0].nodeValue;
        }
      }
    }
  </script>
