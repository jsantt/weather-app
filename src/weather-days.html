<link rel="import" href="../bower_components/polymer/polymer-element.html">

<link rel="import" href="./weather-day.html">

<dom-module id="weather-days">
  <template>

    <style>
      :host {
        display: block;
      }

      .weatherGrid {
        display: grid;
        grid-row-gap: 0.5rem;
        grid-template-columns: repeat(25, 1fr);  
      }
	

    </style>

      <!-- today -->
      <weather-day 
      class="weatherGrid"
      weather-data="[[todayData]]"
      min-temperature="[[minTemperature]]"
      show-time-now="true"
      day-number="1"></weather-day>
  

      <!-- tomorrow -->
      <weather-day 
      class="weatherGrid"
      weather-data="[[day2Data]]"
      min-temperature="[[minTemperature]]"
      day-number="2"></weather-day>

      <!-- day after tomorrow -->
      <weather-day 
      class="weatherGrid"
      weather-data="[[day3Data]]"
      min-temperature="[[minTemperature]]"
      day-number="3"></weather-day>
     
  </template>

  <script>
    /**
     * @customElement
     * @polymer
     */
    class WeatherDays extends Polymer.Element {
      static get is() { return 'weather-days'; }

      static get properties() {
        return {
          weatherData: {
            type: Array
          },
          todayData: {
            type: Array,
            computed: '_sliceToday(weatherData)'
          },
          day2Data: {
            type: Array,
            computed: '_sliceDay2(weatherData)'
          },
          day3Data: {
            type: Array,
            computed: '_sliceDay3(weatherData)'
          },
          minTemperature: {
            type: Number,
            computed: '_minTemp(weatherData)'
          },
        };
      }

      // for computed properties

      _sliceToday(data) {
        return data.slice(0, 24);
      }

      _sliceDay2(data) {
        return data.slice(24, 48);
      }

      _sliceDay3(data) {
        return data.slice(48, 72);
      }

      _minTemp(weatherData) {
        const min = weatherData.reduce(function (previous, current) {
          
          const currentTemp = Number.isNaN(current.temperature) ? Number.MAX_VALUE : current.temperature;
          return previous.temperature < currentTemp ? previous : current;
        });
        return min.temperature;
      }
    }

    window.customElements.define(WeatherDays.is, WeatherDays);
  </script>
</dom-module>
