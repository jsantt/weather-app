import { PolymerElement, html } from '@polymer/polymer/polymer-element.js';

import './geolocate-button.js';
import './time-now.js';
import '../weather-symbol.js';
import './weather-symbol-name.js';

class ForecastHeader extends PolymerElement {
  static get template() {
    return html`
    <style>
      :host {
        display: block;
      }
      
      header {
        background-color: var(--color-primary);
        padding: var(--padding-header-footer) 0 0 var(--padding-header-footer);
      }

      .header {
        display: grid;
        grid-template-columns: 1fr 1fr 3.5rem;
        grid-template-rows: 3.4rem 3.4rem 3.4rem;
        grid-template-areas:     
          'place place feels'
          'temp  icon  wind  '
          'text  text obs   ';

        align-items: center;

        margin-left: 2rem;
      }
      weather-symbol {
        grid-area: icon;
        margin: -1rem 0 -1.3rem 0;
      }
      .place {
    
        text-align: center;
      }      



      .forecast {
    
      }


      .wind {
        grid-area: wind;
        text-align: center;
      }
      .wind.selected {
        background-color: #f5f5f59e;
        border-top: none;
        border-bottom: none;
      }

      .feels {
        grid-area: feels;
        text-align: center;
      }
      #feels_icon:hover {
        transform: scale(1.1);
      }

      .observation {
        grid-area: obs;
        text-align: center;
      }

      #observation_icon:hover {
        transform: scale(1.1);
      }
    
      h1 {
        grid-area: place;
        margin: -0.5rem 0 0 0;
        padding: 0;
      }
        
      .aside-item {
        align-self: stretch;

        border-top: 1px solid #f5f5f59e;
        border-bottom: 1px solid #f5f5f59e;
        border-image: linear-gradient(to left, #f5f5f59e, #f5f5f59e, #84b9ff);
        border-image-slice: 1;

        display: flex;
        align-items: center;
        justify-content: center;

        color: var(--color-white);
        font-size: var(--font-size-xsmall);

        padding-left: 0.5rem;
        text-align: center;

      }

      .location {
        color: var(--color-black);
        font-size: 1.563rem;
      }

      .temperature {
        grid-area: temp;
        font-size: var(--font-size-xxxlarge);
        line-height: 1.15;
        margin: 0 0 0 auto;

      }

      .degree {
        font-size: var(--font-size-large);
        vertical-align: top;
      }

      .observation_link {
        color: var(--color-white);
        display: block;

        margin-top: auto;
        line-height: var(--line-height--tight);
      }
      .feels-like {
        grid-area: feels;
      }

      weather-symbol-name {
        grid-area: text;
        /*align-self: flex-end;*/

        font-size: var(--font-size-medium);
        text-align: center;
      }

    </style>
    <header>
      <div class="header">
        <h1 class="place">
          <geolocate-button 
            class="button"
            hide="[[loading]]">
          </geolocate-button>

          <location-selector 
            loading="[[loading]]" 
            place="[[place]]">
          </location-selector>
        </h1>

        <!-- div class="feels aside-item">
          <svg id="feels_icon" xmlns="http://www.w3.org/2000/svg" version="1.0" width="32px" height="32px" viewBox="0 0 119.000000 119.000000" preserveAspectRatio="xMidYMid meet">
          <g transform="translate(0.000000,119.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none">
          <path d="M480 1011 c-67 -36 -85 -65 -85 -136 0 -57 3 -67 30 -96 40 -42 83 -59 150 -59 71 0 112 17 154 65 31 36 33 42 29 97 -5 65 -32 103 -93 133 -46 21 -141 19 -185 -4z"/>
          <path d="M510 661 c-127 -41 -225 -160 -314 -380 -33 -83 -34 -109 0 -121 14 -6 156 -10 330 -10 l304 0 15 37 c24 57 29 115 15 175 -28 119 -98 223 -186 274 -45 27 -123 39 -164 25z"/>
          </g>
          </svg>
        </div -->
    
        <div class="temperature">
          [[_round(selectedData.temperature)]]
          <span class="degree">Â°C</span>
        </div>
          
        <weather-symbol 
          symbol-id="[[selectedData.symbol]]" 
          large="true">
        </weather-symbol>

        <div id="wind" class="wind aside-item">

          <wind-now 
            wind="[[selectedData.wind]]"
            wind-direction="[[selectedData.windDirection]]">
          </wind-now>
        </div>

        <weather-symbol-name
          symbol-id="[[selectedData.symbol]]">
        </weather-symbol-name>
        
        <div 
          class="observation aside-item"
          on-click="_observationLinkClicked">
          <!--svg id="observation_icon" xmlns="http://www.w3.org/2000/svg" version="1.0" width="32px" height="32px" viewBox="0 0 190.000000 172.000000" preserveAspectRatio="xMidYMid meet">
            <g transform="translate(0.000000,172.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none">
            <path d="M497 1503 c-4 -3 -7 -286 -7 -628 0 -668 -1 -661 51 -653 l24 3 5 462 5 462 93 -119 93 -120 52 0 c102 1 527 46 538 57 13 13 59 195 59 234 0 14 -6 33 -12 42 -18 25 -586 171 -631 163 -19 -4 -63 -33 -109 -71 -42 -36 -79 -65 -82 -65 -3 0 -6 42 -6 94 0 113 -10 146 -43 146 -13 0 -27 -3 -30 -7z m327 -181 c3 -5 -10 -71 -28 -147 l-33 -138 -62 81 c-34 44 -62 84 -62 89 1 4 31 34 69 65 62 53 103 71 116 50z m144 -37 c12 -3 22 -12 22 -18 0 -20 -57 -257 -63 -263 -12 -12 -87 -16 -87 -5 0 11 57 263 66 289 2 7 12 11 21 8 10 -2 28 -7 41 -11z m166 -41 c30 -5 35 -10 31 -28 -3 -11 -15 -61 -28 -111 l-22 -90 -49 -3 -49 -3 7 33 c27 138 50 219 62 214 7 -3 29 -8 48 -12z m188 -52 c4 -4 -1 -41 -10 -82 l-17 -75 -45 -6 c-25 -4 -46 -6 -47 -5 0 0 9 43 20 94 l22 93 35 -6 c19 -4 38 -10 42 -13z"/>
            </g>
          </svg -->
          <!--svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 400 400"-->
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid meet" viewBox="0 0 640 640" width="40" height="40"><defs><path d="M483.26 99.27L545.58 63.84L539.23 135.24L610.84 139.1L566.88 195.79L625.01 237.73L557.39 261.6L583.64 328.37L513.82 311.92L499.81 382.23L450.01 330.64L400.17 382.23L386.16 311.92L316.35 328.37L342.58 261.6L274.95 237.73L333.12 195.79L289.17 139.1L360.76 135.24L354.4 63.84L416.72 99.27L450.01 35.76L483.26 99.27Z" id="c1cKI45Tr0"></path><path d="M446.18 116.52C393.08 116.52 350.04 159.56 350.04 212.65C350.04 265.75 393.08 308.79 446.18 308.79C499.27 308.79 542.31 265.75 542.31 212.65C542.31 159.56 499.27 116.52 446.18 116.52Z" id="bJslujqvb"></path><path d="M238.04 158.09C178.47 158.09 127.93 196.4 108.89 249.81C60.29 251.44 21.37 291.24 21.37 340.23C21.37 390.23 61.92 430.78 111.92 430.78C131.78 430.78 150.05 424.32 164.98 413.48C186.16 426.93 211.17 434.83 238.04 434.83C263.57 434.83 287.36 427.73 307.82 415.53C322.2 425.16 339.5 430.8 358.1 430.8C408.1 430.8 448.65 390.25 448.65 340.25C448.65 293.31 413.02 254.77 367.34 250.14C348.41 196.54 297.77 158.09 238.04 158.09Z" id="g3vFf2pxc"></path><path d="M442.43 440.12L442.43 225.53L375.49 225.53L375.49 438.03L442.43 440.12Z" id="d2tkMasPYR"></path><path d="" id="behC4jQAj"></path><path d="M495.93 510.37C495.93 555.35 458.07 591.87 411.43 591.87C364.79 591.87 326.93 555.35 326.93 510.37C326.93 465.39 364.79 428.87 411.43 428.87C458.07 428.87 495.93 465.39 495.93 510.37Z" id="bajFMogbi2"></path><path d="M415.68 213.04L417.54 213.21L419.39 213.46L421.2 213.76L423 214.14L424.76 214.57L426.5 215.07L428.21 215.63L429.88 216.25L431.52 216.93L433.13 217.66L434.71 218.45L436.24 219.29L437.74 220.19L439.2 221.13L440.61 222.13L441.98 223.18L443.31 224.27L444.59 225.4L445.82 226.58L447 227.81L448.14 229.07L449.22 230.38L450.24 231.72L451.21 233.11L452.13 234.52L452.98 235.98L453.78 237.46L454.51 238.98L455.18 240.53L455.79 242.11L456.33 243.71L456.81 245.34L457.21 247L457.55 248.68L457.81 250.38L458 252.11L458.12 253.85L458.15 255.61L458.15 286.57L458.15 366.61L458.15 416.72L458.15 438.13L460.21 439.28L462.23 440.48L464.21 441.73L466.16 443.02L468.07 444.35L469.95 445.73L471.78 447.15L473.57 448.62L475.32 450.12L477.03 451.67L478.7 453.25L480.32 454.87L481.9 456.53L483.43 458.23L484.92 459.97L486.36 461.74L487.75 463.54L489.09 465.38L490.38 467.25L491.62 469.15L492.81 471.09L493.95 473.05L495.03 475.05L496.06 477.07L497.03 479.12L497.95 481.2L498.81 483.31L499.61 485.44L500.35 487.6L501.03 489.78L501.65 491.98L502.21 494.21L502.71 496.46L503.14 498.73L503.51 501.02L503.82 503.33L504.05 505.65L504.22 508L504.33 510.36L504.36 512.74L504.28 516.31L504.05 519.85L503.67 523.34L503.13 526.8L502.46 530.21L501.64 533.57L500.68 536.88L499.58 540.13L498.35 543.33L497 546.47L495.51 549.55L493.9 552.57L492.17 555.52L490.32 558.39L488.35 561.2L486.28 563.92L484.09 566.57L481.8 569.14L479.4 571.63L476.91 574.02L474.32 576.33L471.63 578.54L468.85 580.66L465.99 582.68L463.03 584.6L460 586.42L456.89 588.13L453.7 589.73L450.44 591.22L447.11 592.59L443.71 593.85L440.25 594.99L436.73 596L433.15 596.89L429.51 597.64L425.82 598.27L422.08 598.76L418.3 599.12L414.48 599.33L410.61 599.4L406.75 599.33L402.92 599.12L399.14 598.76L395.41 598.27L391.72 597.64L388.08 596.89L384.5 596L380.98 594.99L377.52 593.85L374.12 592.59L370.79 591.22L367.53 589.73L364.34 588.13L361.23 586.42L358.2 584.6L355.25 582.68L352.38 580.66L349.6 578.54L346.91 576.33L344.32 574.02L341.83 571.63L339.43 569.14L337.14 566.57L334.95 563.92L332.87 561.2L330.91 558.39L329.06 555.52L327.32 552.57L325.71 549.55L324.23 546.47L322.87 543.33L321.64 540.13L320.54 536.88L319.58 533.57L318.76 530.21L318.09 526.8L317.55 523.34L317.17 519.85L316.94 516.31L316.86 512.74L316.9 510.29L317.01 507.85L317.19 505.44L317.44 503.04L317.76 500.66L318.16 498.3L318.62 495.97L319.14 493.65L319.74 491.36L320.4 489.09L321.12 486.85L321.91 484.63L322.76 482.44L323.67 480.28L324.64 478.15L325.67 476.04L326.75 473.97L327.9 471.93L329.1 469.92L330.36 467.94L331.67 465.99L333.04 464.09L334.46 462.21L335.93 460.37L337.45 458.58L339.02 456.81L340.63 455.09L342.3 453.41L344.01 451.77L345.77 450.17L347.58 448.61L349.42 447.1L351.31 445.64L353.24 444.21L355.22 442.84L357.23 441.51L359.28 440.23L361.37 439L363.5 437.82L365.66 436.69L365.66 255.61L365.7 253.85L365.81 252.11L366 250.38L366.26 248.68L366.6 247L367 245.34L367.47 243.71L368.01 242.11L368.62 240.53L369.29 238.98L370.02 237.46L370.82 235.98L371.67 234.52L372.58 233.11L373.55 231.72L374.57 230.38L375.65 229.07L376.78 227.81L377.96 226.58L379.19 225.4L380.47 224.27L381.79 223.18L383.16 222.13L384.58 221.13L386.03 220.19L387.53 219.29L389.06 218.45L390.63 217.66L392.24 216.93L393.89 216.25L395.56 215.63L397.27 215.07L399.01 214.57L400.77 214.14L402.57 213.76L404.39 213.46L406.23 213.21L408.1 213.04L409.99 212.93L411.89 212.9L413.8 212.93L415.68 213.04ZM409.41 227.23L408.16 227.35L406.94 227.51L405.72 227.71L404.53 227.96L403.35 228.25L402.19 228.59L401.05 228.96L399.93 229.37L398.84 229.83L397.76 230.31L396.72 230.84L395.69 231.4L394.69 232L393.72 232.63L392.78 233.3L391.86 233.99L390.98 234.72L390.12 235.48L389.3 236.26L388.51 237.08L387.76 237.92L387.04 238.79L386.35 239.69L385.7 240.61L385.1 241.56L384.52 242.52L383.99 243.51L383.5 244.53L383.06 245.56L382.65 246.61L382.29 247.68L381.97 248.76L381.7 249.87L381.48 250.99L381.3 252.12L381.18 253.27L381.1 254.43L381.08 255.6L381.08 445.16L373.06 449.19L371.19 450.17L369.36 451.19L367.56 452.25L365.8 453.35L364.09 454.49L362.4 455.68L360.76 456.9L359.16 458.15L357.6 459.45L356.08 460.78L354.6 462.14L353.16 463.54L351.77 464.97L350.42 466.43L349.11 467.92L347.84 469.44L346.62 471L345.45 472.58L344.32 474.18L343.24 475.82L342.21 477.48L341.22 479.16L340.29 480.87L339.4 482.6L338.56 484.36L337.77 486.13L337.03 487.93L336.34 489.74L335.71 491.58L335.12 493.43L334.59 495.3L334.11 497.18L333.69 499.08L333.32 500.99L333.01 502.92L332.75 504.85L332.55 506.8L332.4 508.76L332.32 510.73L332.29 512.71L332.35 515.7L332.55 518.65L332.87 521.57L333.32 524.45L333.88 527.3L334.57 530.11L335.37 532.87L336.29 535.59L337.32 538.27L338.46 540.89L339.7 543.47L341.05 545.99L342.5 548.45L344.04 550.86L345.69 553.2L347.43 555.48L349.25 557.7L351.17 559.85L353.17 561.93L355.26 563.93L357.43 565.86L359.68 567.71L362 569.49L364.39 571.18L366.86 572.79L369.4 574.31L372 575.74L374.66 577.08L377.38 578.33L380.17 579.48L383 580.53L385.89 581.48L388.84 582.33L391.82 583.07L394.86 583.7L397.94 584.23L401.05 584.64L404.21 584.94L407.4 585.12L410.62 585.18L413.85 585.12L417.04 584.94L420.2 584.64L423.32 584.23L426.4 583.7L429.43 583.07L432.43 582.33L435.37 581.48L438.26 580.53L441.1 579.48L443.88 578.33L446.61 577.08L449.27 575.74L451.88 574.31L454.41 572.79L456.88 571.18L459.28 569.49L461.6 567.71L463.85 565.86L466.02 563.93L468.11 561.93L470.11 559.85L472.03 557.7L473.86 555.48L475.6 553.2L477.25 550.86L478.8 548.45L480.25 545.99L481.6 543.47L482.84 540.89L483.98 538.27L485.01 535.59L485.93 532.87L486.73 530.11L487.42 527.3L487.99 524.45L488.44 521.57L488.76 518.65L488.96 515.7L489.03 512.71L489 510.78L488.92 508.86L488.79 506.94L488.6 505.04L488.36 503.16L488.07 501.28L487.72 499.42L487.33 497.57L486.88 495.74L486.38 493.93L485.84 492.13L485.24 490.34L484.6 488.58L483.91 486.84L483.16 485.11L482.38 483.41L481.54 481.72L480.66 480.06L479.73 478.42L478.75 476.8L477.73 475.21L476.67 473.64L475.56 472.1L474.4 470.58L473.2 469.08L471.96 467.62L470.68 466.18L469.35 464.78L467.99 463.4L466.58 462.05L465.13 460.73L463.64 459.44L462.1 458.19L460.53 456.97L458.92 455.78L457.28 454.62L455.59 453.5L453.86 452.42L452.1 451.37L450.3 450.36L442.74 446.23L442.74 255.6L442.71 254.43L442.64 253.27L442.51 252.12L442.33 250.99L442.11 249.87L441.84 248.76L441.53 247.68L441.17 246.61L440.76 245.56L440.31 244.53L439.83 243.51L439.3 242.52L438.73 241.56L438.12 240.61L437.47 239.69L436.79 238.79L436.07 237.92L435.32 237.08L434.53 236.26L433.71 235.48L432.86 234.72L431.97 233.99L431.06 233.3L430.12 232.63L429.15 232L428.15 231.4L427.13 230.84L426.08 230.31L425.01 229.83L423.92 229.37L422.8 228.96L421.66 228.59L420.51 228.25L419.33 227.96L418.14 227.71L416.93 227.51L415.7 227.35L414.46 227.23L413.2 227.16L411.93 227.14L410.66 227.16L409.41 227.23Z" id="d2Xn8Z2XtZ"></path><path d="M457.44 512.98C457.44 538.61 436.63 559.43 411 559.43C385.36 559.43 364.55 538.61 364.55 512.98C364.55 487.34 385.36 466.53 411 466.53C436.63 466.53 457.44 487.34 457.44 512.98Z" id="b1onn2LVwa"></path><path d="M438.72 247.43L437.47 436.37" id="b1l7sUE4kv"></path><path d="M410.93 313.87L410.93 493.87" id="aCOfP03in"></path></defs><g><g><g><use xlink:href="#c1cKI45Tr0" opacity="1" fill="#ffa800" fill-opacity="1"></use><g><use xlink:href="#c1cKI45Tr0" opacity="1" fill-opacity="0" stroke="#000000" stroke-width="10" stroke-opacity="0"></use></g></g><g><use xlink:href="#bJslujqvb" opacity="1" fill="#ffa800" fill-opacity="1"></use><g><use xlink:href="#bJslujqvb" opacity="1" fill-opacity="0" stroke="#ffffff" stroke-width="16" stroke-opacity="1"></use></g></g><g><use xlink:href="#g3vFf2pxc" opacity="1" fill="#ffffff" fill-opacity="1"></use><g><use xlink:href="#g3vFf2pxc" opacity="1" fill-opacity="0" stroke="#000000" stroke-width="21" stroke-opacity="1"></use></g></g><g><use xlink:href="#d2tkMasPYR" opacity="1" fill="#ffffff" fill-opacity="1"></use><g><use xlink:href="#d2tkMasPYR" opacity="1" fill-opacity="0" stroke="#000000" stroke-width="1" stroke-opacity="0"></use></g></g><g><g><use xlink:href="#behC4jQAj" opacity="1" fill-opacity="0" stroke="#000000" stroke-width="2" stroke-opacity="0"></use></g></g><g><use xlink:href="#bajFMogbi2" opacity="1" fill="#ffffff" fill-opacity="0.99"></use></g><g><use xlink:href="#d2Xn8Z2XtZ" opacity="1" fill="#000000" fill-opacity="1"></use><g><use xlink:href="#d2Xn8Z2XtZ" opacity="1" fill-opacity="0" stroke="#000000" stroke-width="1.5" stroke-opacity="1"></use></g><g><filter id="shadow8893054" x="307.86" y="203.9" width="206.5" height="405.51" filterUnits="userSpaceOnUse" primitiveUnits="userSpaceOnUse"><feFlood></feFlood><feComposite in2="SourceAlpha" operator="out"></feComposite><feGaussianBlur stdDeviation="1"></feGaussianBlur><feOffset dx="1" dy="1" result="afterOffset"></feOffset><feFlood flood-color="#000000" flood-opacity="0.66"></feFlood><feComposite in2="afterOffset" operator="in"></feComposite><feMorphology operator="dilate" radius="1"></feMorphology><feComposite in2="SourceAlpha" operator="in"></feComposite></filter><path d="M415.68 213.04L417.54 213.21L419.39 213.46L421.2 213.76L423 214.14L424.76 214.57L426.5 215.07L428.21 215.63L429.88 216.25L431.52 216.93L433.13 217.66L434.71 218.45L436.24 219.29L437.74 220.19L439.2 221.13L440.61 222.13L441.98 223.18L443.31 224.27L444.59 225.4L445.82 226.58L447 227.81L448.14 229.07L449.22 230.38L450.24 231.72L451.21 233.11L452.13 234.52L452.98 235.98L453.78 237.46L454.51 238.98L455.18 240.53L455.79 242.11L456.33 243.71L456.81 245.34L457.21 247L457.55 248.68L457.81 250.38L458 252.11L458.12 253.85L458.15 255.61L458.15 286.57L458.15 366.61L458.15 416.72L458.15 438.13L460.21 439.28L462.23 440.48L464.21 441.73L466.16 443.02L468.07 444.35L469.95 445.73L471.78 447.15L473.57 448.62L475.32 450.12L477.03 451.67L478.7 453.25L480.32 454.87L481.9 456.53L483.43 458.23L484.92 459.97L486.36 461.74L487.75 463.54L489.09 465.38L490.38 467.25L491.62 469.15L492.81 471.09L493.95 473.05L495.03 475.05L496.06 477.07L497.03 479.12L497.95 481.2L498.81 483.31L499.61 485.44L500.35 487.6L501.03 489.78L501.65 491.98L502.21 494.21L502.71 496.46L503.14 498.73L503.51 501.02L503.82 503.33L504.05 505.65L504.22 508L504.33 510.36L504.36 512.74L504.28 516.31L504.05 519.85L503.67 523.34L503.13 526.8L502.46 530.21L501.64 533.57L500.68 536.88L499.58 540.13L498.35 543.33L497 546.47L495.51 549.55L493.9 552.57L492.17 555.52L490.32 558.39L488.35 561.2L486.28 563.92L484.09 566.57L481.8 569.14L479.4 571.63L476.91 574.02L474.32 576.33L471.63 578.54L468.85 580.66L465.99 582.68L463.03 584.6L460 586.42L456.89 588.13L453.7 589.73L450.44 591.22L447.11 592.59L443.71 593.85L440.25 594.99L436.73 596L433.15 596.89L429.51 597.64L425.82 598.27L422.08 598.76L418.3 599.12L414.48 599.33L410.61 599.4L406.75 599.33L402.92 599.12L399.14 598.76L395.41 598.27L391.72 597.64L388.08 596.89L384.5 596L380.98 594.99L377.52 593.85L374.12 592.59L370.79 591.22L367.53 589.73L364.34 588.13L361.23 586.42L358.2 584.6L355.25 582.68L352.38 580.66L349.6 578.54L346.91 576.33L344.32 574.02L341.83 571.63L339.43 569.14L337.14 566.57L334.95 563.92L332.87 561.2L330.91 558.39L329.06 555.52L327.32 552.57L325.71 549.55L324.23 546.47L322.87 543.33L321.64 540.13L320.54 536.88L319.58 533.57L318.76 530.21L318.09 526.8L317.55 523.34L317.17 519.85L316.94 516.31L316.86 512.74L316.9 510.29L317.01 507.85L317.19 505.44L317.44 503.04L317.76 500.66L318.16 498.3L318.62 495.97L319.14 493.65L319.74 491.36L320.4 489.09L321.12 486.85L321.91 484.63L322.76 482.44L323.67 480.28L324.64 478.15L325.67 476.04L326.75 473.97L327.9 471.93L329.1 469.92L330.36 467.94L331.67 465.99L333.04 464.09L334.46 462.21L335.93 460.37L337.45 458.58L339.02 456.81L340.63 455.09L342.3 453.41L344.01 451.77L345.77 450.17L347.58 448.61L349.42 447.1L351.31 445.64L353.24 444.21L355.22 442.84L357.23 441.51L359.28 440.23L361.37 439L363.5 437.82L365.66 436.69L365.66 255.61L365.7 253.85L365.81 252.11L366 250.38L366.26 248.68L366.6 247L367 245.34L367.47 243.71L368.01 242.11L368.62 240.53L369.29 238.98L370.02 237.46L370.82 235.98L371.67 234.52L372.58 233.11L373.55 231.72L374.57 230.38L375.65 229.07L376.78 227.81L377.96 226.58L379.19 225.4L380.47 224.27L381.79 223.18L383.16 222.13L384.58 221.13L386.03 220.19L387.53 219.29L389.06 218.45L390.63 217.66L392.24 216.93L393.89 216.25L395.56 215.63L397.27 215.07L399.01 214.57L400.77 214.14L402.57 213.76L404.39 213.46L406.23 213.21L408.1 213.04L409.99 212.93L411.89 212.9L413.8 212.93L415.68 213.04ZM409.41 227.23L408.16 227.35L406.94 227.51L405.72 227.71L404.53 227.96L403.35 228.25L402.19 228.59L401.05 228.96L399.93 229.37L398.84 229.83L397.76 230.31L396.72 230.84L395.69 231.4L394.69 232L393.72 232.63L392.78 233.3L391.86 233.99L390.98 234.72L390.12 235.48L389.3 236.26L388.51 237.08L387.76 237.92L387.04 238.79L386.35 239.69L385.7 240.61L385.1 241.56L384.52 242.52L383.99 243.51L383.5 244.53L383.06 245.56L382.65 246.61L382.29 247.68L381.97 248.76L381.7 249.87L381.48 250.99L381.3 252.12L381.18 253.27L381.1 254.43L381.08 255.6L381.08 445.16L373.06 449.19L371.19 450.17L369.36 451.19L367.56 452.25L365.8 453.35L364.09 454.49L362.4 455.68L360.76 456.9L359.16 458.15L357.6 459.45L356.08 460.78L354.6 462.14L353.16 463.54L351.77 464.97L350.42 466.43L349.11 467.92L347.84 469.44L346.62 471L345.45 472.58L344.32 474.18L343.24 475.82L342.21 477.48L341.22 479.16L340.29 480.87L339.4 482.6L338.56 484.36L337.77 486.13L337.03 487.93L336.34 489.74L335.71 491.58L335.12 493.43L334.59 495.3L334.11 497.18L333.69 499.08L333.32 500.99L333.01 502.92L332.75 504.85L332.55 506.8L332.4 508.76L332.32 510.73L332.29 512.71L332.35 515.7L332.55 518.65L332.87 521.57L333.32 524.45L333.88 527.3L334.57 530.11L335.37 532.87L336.29 535.59L337.32 538.27L338.46 540.89L339.7 543.47L341.05 545.99L342.5 548.45L344.04 550.86L345.69 553.2L347.43 555.48L349.25 557.7L351.17 559.85L353.17 561.93L355.26 563.93L357.43 565.86L359.68 567.71L362 569.49L364.39 571.18L366.86 572.79L369.4 574.31L372 575.74L374.66 577.08L377.38 578.33L380.17 579.48L383 580.53L385.89 581.48L388.84 582.33L391.82 583.07L394.86 583.7L397.94 584.23L401.05 584.64L404.21 584.94L407.4 585.12L410.62 585.18L413.85 585.12L417.04 584.94L420.2 584.64L423.32 584.23L426.4 583.7L429.43 583.07L432.43 582.33L435.37 581.48L438.26 580.53L441.1 579.48L443.88 578.33L446.61 577.08L449.27 575.74L451.88 574.31L454.41 572.79L456.88 571.18L459.28 569.49L461.6 567.71L463.85 565.86L466.02 563.93L468.11 561.93L470.11 559.85L472.03 557.7L473.86 555.48L475.6 553.2L477.25 550.86L478.8 548.45L480.25 545.99L481.6 543.47L482.84 540.89L483.98 538.27L485.01 535.59L485.93 532.87L486.73 530.11L487.42 527.3L487.99 524.45L488.44 521.57L488.76 518.65L488.96 515.7L489.03 512.71L489 510.78L488.92 508.86L488.79 506.94L488.6 505.04L488.36 503.16L488.07 501.28L487.72 499.42L487.33 497.57L486.88 495.74L486.38 493.93L485.84 492.13L485.24 490.34L484.6 488.58L483.91 486.84L483.16 485.11L482.38 483.41L481.54 481.72L480.66 480.06L479.73 478.42L478.75 476.8L477.73 475.21L476.67 473.64L475.56 472.1L474.4 470.58L473.2 469.08L471.96 467.62L470.68 466.18L469.35 464.78L467.99 463.4L466.58 462.05L465.13 460.73L463.64 459.44L462.1 458.19L460.53 456.97L458.92 455.78L457.28 454.62L455.59 453.5L453.86 452.42L452.1 451.37L450.3 450.36L442.74 446.23L442.74 255.6L442.71 254.43L442.64 253.27L442.51 252.12L442.33 250.99L442.11 249.87L441.84 248.76L441.53 247.68L441.17 246.61L440.76 245.56L440.31 244.53L439.83 243.51L439.3 242.52L438.73 241.56L438.12 240.61L437.47 239.69L436.79 238.79L436.07 237.92L435.32 237.08L434.53 236.26L433.71 235.48L432.86 234.72L431.97 233.99L431.06 233.3L430.12 232.63L429.15 232L428.15 231.4L427.13 230.84L426.08 230.31L425.01 229.83L423.92 229.37L422.8 228.96L421.66 228.59L420.51 228.25L419.33 227.96L418.14 227.71L416.93 227.51L415.7 227.35L414.46 227.23L413.2 227.16L411.93 227.14L410.66 227.16L409.41 227.23Z" id="b4NrksuMrk" fill="white" fill-opacity="1" filter="url(#shadow8893054)"></path></g></g><g><use xlink:href="#b1onn2LVwa" opacity="1" fill="#000000" fill-opacity="1"></use><g><use xlink:href="#b1onn2LVwa" opacity="1" fill-opacity="0" stroke="#000000" stroke-width="0" stroke-opacity="0"></use></g></g><g><g><use xlink:href="#b1l7sUE4kv" opacity="1" fill-opacity="0" stroke="#000000" stroke-width="1" stroke-opacity="0"></use></g></g><g><g><use xlink:href="#aCOfP03in" opacity="1" fill-opacity="0" stroke="#000000" stroke-width="26" stroke-opacity="1"></use></g></g></g></g></svg>

     
 <g>
  <title>background</title>
  <rect fill="none" id="canvas_background" height="402" width="402" y="-1" x="-1"/>
  <g display="none" overflow="visible" y="0" x="0" height="100%" width="100%" id="canvasGrid">
   <rect fill="url(#gridpattern)" stroke-width="0" y="0" x="0" height="100%" width="100%"/>
  </g>
 </g>
 <g>
  <title>Layer 1</title>
  <path stroke="#ffffff" id="svg_9" d="m241.719776,228.925192l0,-158.666975c0,-20.518237 -18.044458,-37.132464 -40.216106,-37.132464c-22.219639,0 -40.192111,16.614227 -40.192111,37.132464l0,157.413699c-25.26704,12.798944 -42.423673,37.609374 -42.423673,66.113088c0,41.613203 36.496836,75.340749 81.500002,75.340749c45.027162,0 81.500002,-33.727546 81.500002,-75.340749c0.011998,-27.649711 -16.14883,-51.772504 -40.168115,-64.859812zm-41.319889,127.834164c-37.540631,0 -68.098633,-28.259713 -68.098633,-62.996534c0,-22.980426 13.581334,-44.141938 35.441043,-55.221786l6.970632,-3.504737l0,-164.789173c0,-13.652946 12.033638,-24.743885 26.826734,-24.743885c14.769101,0 26.778744,11.090939 26.778744,24.743885l0,165.720812l6.574709,3.593464c21.067865,11.490213 33.665392,31.731177 33.665392,54.201419c-0.023995,34.736821 -30.593995,62.996534 -68.158621,62.996534zm27.690565,-106.517379l-13.185412,-7.175838l0,-108.236475l-26.790741,0l0,107.526655l-13.929266,7.042746c-17.564552,8.928206 -28.494407,25.886252 -28.494407,44.363756c0,27.882621 24.559179,50.585773 54.709261,50.585773c30.174077,0 54.709261,-22.703152 54.709261,-50.585773c0.023995,-17.767684 -10.329972,-34.437366 -27.018697,-43.520845z" stroke-width="1.5" fill="#000000"/>
 </g>

<g>
        
      </g>


          </svg>
        </div>
      
        </div>
        <time-now update-time="[[locationChanged]]"></time-now>
      
      </header>
    `;
  }

  static get is() { return 'forecast-header'; }

  static get properties() {
    return {
      loading: {
        type: Boolean
      },
      forecastData: {
        type: Object
      },
      nextIsoHour: {
        type: String
      },
      selectedData: {
        type: Object,
        computed: '_getWeatherNow(forecastData, nextIsoHour)'
      },
      place: {
        type: Object
      }

    };
  }

  constructor()  {
    super();
    this.addEventListener('wind-now.toggle-wind', (event) => this._onToggleWind(event));

  }

  ready() {
    super.ready();
  }

  _getWeatherNow(data, time) {
    if(data) {
      return data.filter(function (item) {
        return item.time === time;
      })[0];
    }
  }

  _observationLinkClicked() {
    const event = new CustomEvent('forecast-header.observation-link-click', {bubbles: true, composed: true});
    this.dispatchEvent(event);
  }

  _onToggleWind() {
    this.shadowRoot.querySelector("#wind").classList.toggle("selected");;
  }

  _parseHour(timestamp) {
    const date = new Date(timestamp);
    return date.getHours();
  }

  /*
   * Round to one decimal. Add decimal to even numbers.
   * */
  _round(temperature) {
    return Math.round((temperature) * 10) / 10;
  }
}

window.customElements.define(ForecastHeader.is, ForecastHeader);
